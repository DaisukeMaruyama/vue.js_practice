<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Countdown</title>
</head>
<body style="width: 100%;">
	<div class="container">
		<h4>ストップウォッチ</h4>
		<div style="margin-bottom: 20px;">
				<input id="setTime" style="padding: 4px; width: 50px; text-align: center;" value=""/>
				<span>秒</span>
		</div>
		<input readonly id="input" style="padding: 4px; width: 50px; text-align: center;" value="5"/>
		<button onclick="countDown()" class="" id="button">スタート</button>
		<button onclick="stop()" class="" id="stop">ストップ</button>
		<button onclick="reset()" class="" id="reset">リセット</button>
	</div>
</body>
<style>
	.clickable {
		pointer-events: none;
	}
	.reset {
		pointer-events: none;
	}
	.container {
		margin: 0 auto;
		width: 300px;
	}
	input,
	textarea,
	select {
			outline: none;
	}
</style>
<script>

	let INPUT = document.getElementById('input');
	let BUTTON = document.getElementById('button');
	let RESET = document.getElementById('reset');
	let STOP = document.getElementById('stop');
	let SETTIME = document.getElementById('setTime');


	//関数の外で空定義することで使い回しがきく
	let intervalId;
	let num = 5;

	//stop()でnullを入れることで擬似的にストップウォッチを再現
	function countDown() {
		if (intervalId == null ) {
			intervalId = setInterval(() => {
				BUTTON.classList.add('clickable');
				num -=1;
				INPUT.value = num;
				if (num <= 0) {
					clearInterval(intervalId);
					RESET.classList.remove('reset');
					INPUT.value = ' ';
				}
			}, 1000);
		}	
	}

	function reset() {
		num = 5;
		INPUT.value = 5;
		RESET.classList.add('reset');
		BUTTON.classList.remove('clickable');
	}

	function stop() {
		clearInterval(intervalId);
		BUTTON.classList.remove('clickable');
		intervalId = null;
	}

</script>
</html>